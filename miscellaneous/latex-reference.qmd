---
title: "Professional LaTeX Document Conversion"
subtitle: "From Hard-coded Numbers to Dynamic References"
author: "Dr. Md Abdus Samad"
date: "2025-05-30"
toc: true
toc-depth: 3
code-copy: true
---

## Pre-Conversion Checklist

::: {.callout-warning}
## Important
Before starting any replacements, ensure you have proper backups!
:::

### Essential Steps

- [ ] Create a backup of your entire project
- [ ] Use version control (git commit before changes)
- [ ] Test compile to ensure document builds correctly
- [ ] Document your current numbering scheme

---

## Advanced Regex Patterns

### Citations - Multiple Scenarios

#### Basic single citations

**Find:**

```regex
\[(\d+)\]
```

**Replace:**

```latex
\\cite{$1-key}
```

#### Range citations [1-3] or [1–3]

**Find:**

```regex
\[(\d+)[-–](\d+)\]
```

**Replace:**

```latex
\\cite{$1-key,$2-key}
```

*Manual cleanup needed for intermediate references*

#### Multiple citations [1, 2, 5]

**Find:**

```regex
\[(\d+(?:,\s*\d+)*)\]
```

**Replace:**

```latex
\\cite{process-this-manually}
```

#### Citations with pages [1, p. 15]

**Find:**

```regex
\[(\d+),\s*p\.\s*(\d+)\]
```

**Replace:**

```latex
\\cite[$2]{$1-key}
```

---

### Figures - Context-Aware Patterns

#### Standard references

**Find:**

```regex
(?i)(figure|fig\.?)\s+(\d+)
```

**Replace:**

```latex
Figure~\\ref{fig:$2}
```

#### With parentheses (Figure 1) or (Fig. 1)

**Find:**

```regex
\((?i)(figure|fig\.?)\s+(\d+)\)
```

**Replace:**

```latex
(Figure~\\ref{fig:$2})
```

#### Beginning of sentences

**Find:**

```regex
^(Figure|Fig\.?)\s+(\d+)
```

**Replace:**

```latex
Figure~\\ref{fig:$2}
```

#### Plural figures

**Find:**

```regex
(?i)(figures)\s+(\d+)[-–](\d+)
```

**Replace:**

```latex
Figures~\\ref{fig:$2}--\\ref{fig:$3}
```

---

### Tables - Enhanced Patterns

#### Standard references

**Find:**

```regex
(?i)(table)\s+(\d+)
```

**Replace:**

```latex
Table~\\ref{tab:$2}
```

#### Multiple tables

**Find:**

```regex
(?i)(tables)\s+(\d+)\s+and\s+(\d+)
```

**Replace:**

```latex
Tables~\\ref{tab:$2} and~\\ref{tab:$3}
```

---

## Automated Label Generation

### Smart Label Insertion

#### For figures with meaningful captions

**Find:**

```regex
(\\caption\{([^}]{1,50})[^}]*\})
```

**Replace:**

```latex
$1\n\\label{fig:auto-generated-from-caption}
```

#### For tables

**Find:**

```regex
(\\caption\{([^}]{1,50})[^}]*\})
```

**Replace:**

```latex
$1\n\\label{tab:auto-generated-from-caption}
```

---

## Advanced Workflow

### Phase 1: Analysis and Preparation

Count occurrences to estimate scope:

```bash
# Count citation occurrences
grep -o '\[\d\+\]' document.tex | sort | uniq -c

# Count figure references
grep -o -i 'figure \d\+' document.tex | sort | uniq -c

# Count table references
grep -o -i 'table \d\+' document.tex | sort | uniq -c
```

### Phase 2: Systematic Replacement

::: {.callout-warning}
## Order matters!
Follow this sequence for best results.
:::

1. **Handle special cases first:**
   - Citations with page numbers
   - Figure/table ranges
   - Parenthetical references

2. **Standard replacements:**
   - Single citations
   - Single figure/table references

3. **Add labels systematically**

### Phase 3: Quality Control

```bash
# Find unreferenced labels
grep '\\label{' *.tex | cut -d':' -f2 | sort > labels.txt
grep '\\ref{' *.tex | cut -d':' -f2 | sort > refs.txt
comm -23 labels.txt refs.txt  # Shows unused labels

# Find broken references (compile and check log)
pdflatex document.tex 2>&1 | grep -i "reference.*undefined"
```

---

## Professional Citation Management

### Smart Bibliography Generation

```python
import re

# Extract all citation numbers from your document
with open('document.tex', 'r') as f:
    content = f.read()
    
citations = re.findall(r'\[(\d+)\]', content)
unique_citations = sorted(set(map(int, citations)))

# Generate template .bib entries
for num in unique_citations:
    print(f"""
@article{{ref{num},
  author = {{Author, First}},
  title = {{Title from reference {num}}},
  journal = {{Journal Name}},
  year = {{Year}},
  volume = {{Vol}},
  pages = {{Pages}}
}}""")
```

::: {.callout-tip}
## Pro Tip
Use the `cleveref` package for smart references that automatically determine the reference type (Figure, Table, etc.).
:::

```latex
% In preamble, add consistent reference formatting
\usepackage{cleveref}  % Smart references
\crefname{figure}{Figure}{Figures}
\crefname{table}{Table}{Tables}

% Then use \cref{fig:label} instead of Figure~\ref{fig:label}
```

---

## Troubleshooting Common Issues

| Issue | Solution |
|-------|----------|
| Multiple replacements on same line | Use global flag in your editor: `/g` |
| LaTeX special characters in regex | Escape backslashes: `\\` in find/replace |
| Reference ordering after conversion | Run: `pdflatex` → `bibtex` → `pdflatex` → `pdflatex` |
| Overlapping patterns | Process from most specific to most general |

---

## Final Verification Checklist

- [ ] All `[number]` citations converted
- [ ] All hardcoded figure/table numbers converted
- [ ] All figures have `\label{fig:...}`
- [ ] All tables have `\label{tab:...}`
- [ ] Bibliography file created with matching keys
- [ ] Document compiles without undefined reference errors
- [ ] Cross-reference numbering is logical
- [ ] No orphaned or duplicate labels

::: {.callout-tip}
## Final Pro Tip
Use a LaTeX-aware editor (TeXstudio, VS Code with LaTeX Workshop) that can highlight undefined references and provide auto-completion for labels.
:::

---

::: {.callout-note}
## Ready to Transform Your LaTeX Documents?
Follow this guide systematically for professional, maintainable LaTeX documents with dynamic cross-references!
:::
